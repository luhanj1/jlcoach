<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLCoach - Simulátor Apple iPhone 16</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="https://i.postimg.cc/MGvCz4R4/IMG-0089.jpg" type="image/x-icon">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            box-sizing: border-box;
        }

        /* Kontejner pro samotné zařízení iPhone */
        #iphone-device {
            width: 360px; /* Šířka rámečku */
            height: 700.3px; /* Výška rámečku */
            background-color: #1c1c1e; /* Barva rámečku */
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3), 0 0 0 2px rgba(0,0,0,0.1);
            border-radius: 50px; /* Zaoblení vnějšího telefonu */
            overflow: hidden; 
        }

        /* Samotná simulovaná obrazovka */
        #simulated-screen {
            position: absolute;
            top: 14px;    
            left: 14px;   
            right: 14px;  
            bottom: 14px; 
            background-color: #000000; 
            border-radius: 40px; 
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Dynamic Island (výřez obrazovky) */
        .dynamic-island {
            position: absolute;
            top: 18px; 
            left: 50%;
            transform: translateX(-50%);
            width: 120px; 
            height: 28px;  
            background-color: #000; 
            border-radius: 14px; 
            z-index: 15; 
        }

        /* Tlačítka na stranách telefonu */
        .iphone-side-button {
            position: absolute;
            background-color: #6a6a6a; 
            cursor: pointer;
            z-index: 0; 
            box-shadow: inset 0 0 1px #ffffff1a;
        }
        .iphone-side-button:active {
            background-color: #3a3a3c; 
        }
        .volume-button-up {
            width: 6px; 
            height: 40px; 
            left: 2px; 
            top: 110px; 
            border-radius: 0 3px 3px 0;
        }
        .volume-button-down {
            width: 6px;
            height: 40px;
            left: 2px;
            top: 165px; 
            border-radius: 0 3px 3px 0;
        }
        .side-button-power {
            width: 14px;
            height: 80px; 
            right: -8px; 
            top: 115px;
            border-radius: 3px 0 0 3px;
        }

        .screen-view {
            width: 100%;
            height: 100%;
            display: none; 
            flex-direction: column; 
            animation: fadeIn 0.3s ease-in-out;
            position: relative; 
            background-color: #fff; 
        }
        .screen-view.active { display: flex; } 
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Status bar */
        .status-bar {
            padding: 18px 20px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            font-weight: 600; 
            position: absolute; 
            top: 0; left: 0; right: 0;
            z-index: 10; 
            color: #333333;
            cursor: pointer; 
        }
        .status-bar .operator-name, .status-bar .status-bar-time { margin-left: 0; } 
        .status-bar .icons { display: flex; align-items: center; }
        .status-bar .icons svg { height: 16px; fill: #333333; }
        .status-bar .icons .ios-battery-icon { height: 17px; }
        .status-bar .icons .ios-5g-icon text { font-family: 'Inter', sans-serif; font-weight: 600; }

        /* Indikátor hlasitosti */
        #volume-indicator-overlay {
            position: absolute;
            left: 20px; 
            top: 150px; 
            transform: translateY(-50%); 
            background-color: rgba(50, 50, 50, 0.85);
            border-radius: 16px;
            padding: 8px 6px; 
            z-index: 30; 
            opacity: 0;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            pointer-events: none; 
            width: 32px; 
            height: 140px; 
            display: flex;
            flex-direction: column; 
            justify-content: flex-end; 
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        #volume-indicator-overlay.visible {
            opacity: 1;
            transform: translateY(-50%) translateX(0); 
        }
        #volume-indicator-overlay.hidden-animation {
             transform: translateY(-50%) translateX(-10px); 
        }
        #volume-level-bar-container {
            width: 8px; 
            height: 100%; 
            background-color: rgba(0, 0, 0, 0.25); 
            border-radius: 4px; 
            overflow: hidden;
            display: flex; 
            flex-direction: column;
            justify-content: flex-end;
        }
        #volume-level-bar {
            width: 100%; 
            background-color: #ffffff; 
            border-radius: 4px; 
            height: 0%; 
            transition: height 0.15s linear; 
        }

        #lock-screen {
            background-image: radial-gradient(circle, #e20074, #ffffff);
            color: #333333;
        }
        .lock-screen-content-wrapper { 
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
            padding-top: 55px; 
            width: 100%;
        }
        .lock-screen-top-info {
            display: flex; flex-direction: column; align-items: center;
            width: 100%;
            margin-top: 30px;
        }
        .lock-screen-top-info .current-time-large { font-size: 4.5rem; font-weight: 200; margin-bottom: 8px; }
        .lock-screen-top-info .current-date { font-size: 1.125rem; font-weight: 500; color: #555555; }

        .lock-screen-bottom-controls { 
            display: flex; flex-direction: column; align-items: center;
            width: 100%;
            margin-top: auto; 
            padding-bottom: 5px; 
        }
        .lock-screen-shortcuts {
            display: flex; justify-content: space-between;
            width: 100%; padding: 0 50px 20px; box-sizing: border-box;
        }
        .shortcut-button {
            background-color: rgba(0, 0, 0, 0.12); border-radius: 50%;
            width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
            border: none; cursor: pointer; transition: background-color 0.2s;
        }
        .shortcut-button svg { fill: #333333; width: 22px; height: 22px; }
        .shortcut-button:hover { background-color: rgba(0, 0, 0, 0.2); }
        .shortcut-button.active { background-color: rgba(255, 255, 255, 0.3); }
        .shortcut-button.active svg { fill: #000000; }

        .home-indicator-area {
            padding: 15px 0 8px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            cursor: pointer;
            width: 100%; 
            position: relative; 
            z-index: 20; 
        }
        .home-indicator-bar {
            width: 130px; height: 5px; background-color: rgba(51, 51, 51, 0.6);
            border-radius: 2.5px;
        }

        #passcode-screen {
            background-image: radial-gradient(circle, #e20074, #ffffff);
            color: #333333;
        }
        .passcode-screen-wrapper { 
            flex-grow: 1; 
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center;
            padding: 20px;
            padding-top: 55px; 
            box-sizing: border-box;
            width: 100%;
        }
        .passcode-prompt {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 20px;
            margin-top: 5px; 
        }
        .passcode-circles { display: flex; gap: 18px; margin-bottom: 40px; }
        .passcode-circles .circle {
            width: 16px; height: 16px; border: 1.5px solid rgba(51, 51, 51, 0.6);
            border-radius: 50%; transition: background-color 0.2s;
        }
        .passcode-circles .circle.filled { background-color: rgba(51, 51, 51, 0.8); border-color: rgba(51, 51, 51, 0.8); }
        .passcode-circles.shake { animation: shake-circles 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake-circles {
            10%, 90% { transform: translateX(-2px); } 20%, 80% { transform: translateX(4px); }
            30%, 50%, 70% { transform: translateX(-6px); } 40%, 60% { transform: translateX(6px); }
        }

        .keypad {
            display: grid; grid-template-columns: repeat(3, 1fr);
            gap: 15px; width: 100%; max-width: 300px; margin-bottom: 30px;
        }
        .keypad-button {
            width: 75px; height: 75px; border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.12); color: #333333;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; transition: background-color 0.2s;
            border: none; padding: 0; margin: 0 auto;
        }
        .keypad-button:hover { background-color: rgba(0, 0, 0, 0.2); }
        .keypad-button .digit { font-size: 2rem; font-weight: 400; }
        .keypad-button .letters { font-size: 0.65rem; font-weight: 600; letter-spacing: 0.5px; text-transform: uppercase; opacity: 0.7; margin-top: 2px; }

        .passcode-actions { 
            display: flex; justify-content: space-between;
            width: 100%; max-width: 300px; padding: 0 10px;
            margin-top: 20px; 
        }
        .action-link {
            background: none; border: none; color: #333333;
            font-size: 0.95rem; cursor: pointer; padding: 10px; font-weight: 500;
        }
        .action-link:hover { color: #000000; }

        #home-screen {
            background-image: radial-gradient(circle, #e20074, #ffffff);
            color: #333333
        }
        .home-screen-content { 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            padding: 55px 15px 15px; 
            width: 100%;
            overflow-y: auto; 
        }
        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); 
            gap: 20px; 
            width: 100%;
            margin-bottom: auto; 
        }
        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
        }
        .app-icon img {
            width: 60px; 
            height: 60px;
            border-radius: 12px; 
            margin-bottom: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .app-icon span {
            font-size: 0.7rem; 
            color: #333333;
            max-width: 60px; 
            overflow-wrap: break-word; 
        }
        .dock {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: calc(130% - 20px); 
            max-width: 300px; 
            background-color: rgba(200, 200, 200, 0.3); 
            padding: 10px 5px;
            border-radius: 18px;
            margin: 10px auto 0; 
            backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px);
        }

        .app-screen-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding-top: 55px; 
            color: #333333;
        }
        .app-screen-content h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        /* Control Center */
        #control-center-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.3); 
            z-index: 40; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            display: flex; 
            justify-content: flex-end; 
        }
        #control-center-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        #control-center-panel {
            position: absolute;
            top: 0; 
            right: 0; 
            width: 80%; 
            max-width: 280px;
            height: auto; 
            min-height: 200px; 
            background-color: rgba(240, 240, 240, 0.9); 
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 0 0 0 20px; 
            box-shadow: -5px 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            padding-top: 50px; 
            transform: translateY(-100%); 
            transition: transform 0.3s ease-out;
            z-index: 41;
            display: flex;
            flex-direction: column;
        }
        #control-center-overlay.visible #control-center-panel {
            transform: translateY(0); 
        }
        .control-center-header {
            display: flex;
            justify-content: flex-end; 
            margin-bottom: 20px;
        }
        .control-center-power-btn {
            background: rgba(255,59,48,0.8); 
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .control-center-power-btn:hover {
            background: rgba(255,59,48,1);
        }
        .control-center-power-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        /* Power Off Screen */
        #power-off-screen {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.85); 
            z-index: 50; 
            display: none; 
            flex-direction: column;
            justify-content: space-between; 
            align-items: center;
            padding: 60px 20px 40px;
            color: white;
        }
        .power-off-slider-container {
            width: 100%;
            max-width: 300px;
            padding: 10px; /* Menší padding pro těsnější vzhled */
            background-color: rgba(255,255,255,0.1);
            border-radius: 30px;
            text-align: center;
            position: relative;
            height: 60px; /* Výška kontejneru slideru */
            display: flex;
            align-items: center;
        }
        .power-off-slider-knob {
            position: absolute;
            left: 5px; /* Počáteční pozice */
            top: 50%;
            transform: translateY(-50%);
            width: 50px; /* Velikost kolečka */
            height: 50px;
            background-color: #ff3b30; /* Červená barva */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 8px rgba(0,0,0,0.4);
            cursor: grab;
            z-index: 2; /* Nad textem */
        }
        .power-off-slider-knob svg {
            width: 28px;
            height: 28px;
            fill: white;
        }
        .power-off-slider-text {
            color: rgba(255,255,255,0.7);
            font-size: 1rem;
            pointer-events: none; 
            width: 100%; /* Aby text byl za kolečkem */
            text-align: center;
            z-index: 1; /* Pod kolečkem */
        }

        .power-off-cancel-btn {
            background: rgba(255,255,255,0.15);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .power-off-cancel-btn:hover {
            background: rgba(255,255,255,0.25);
        }
        .power-off-cancel-btn svg {
            width: 28px;
            height: 28px;
            fill: white;
        }

        /* Control Center */
        /* Control Center */
        #control-center-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.3); 
            z-index: 40; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            display: flex; 
            justify-content: flex-end; 
        }
        #control-center-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        #control-center-panel {
            position: absolute;
            top: 0; 
            right: 0; 
            width: 80%; 
            max-width: 280px;
            height: auto; 
            min-height: 200px; 
            background-color: rgba(240, 240, 240, 0.9); 
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 0 0 0 20px; 
            box-shadow: -5px 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            padding-top: 50px; 
            transform: translateY(-100%); 
            transition: transform 0.3s ease-out;
            z-index: 41;
            display: flex;
            flex-direction: column;
        }
        #control-center-overlay.visible #control-center-panel {
            transform: translateY(0); 
        }
        .control-center-header {
            display: flex;
            justify-content: flex-end; 
            margin-bottom: 20px;
        }
        .control-center-power-btn {
            background: rgba(255,59,48,0.8); 
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .control-center-power-btn:hover {
            background: rgba(255,59,48,1);
        }
        .control-center-power-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        /* Power Off Screen */
        #power-off-screen {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.85); 
            z-index: 50; 
            display: none; 
            flex-direction: column;
            justify-content: space-between; 
            align-items: center;
            padding: 60px 20px 40px;
            color: white;
        }
        .power-off-slider-container {
            width: 100%;
            max-width: 300px;
            padding: 10px; /* Menší padding pro těsnější vzhled */
            background-color: rgba(255,255,255,0.1);
            border-radius: 30px;
            text-align: center;
            position: relative;
            height: 60px; /* Výška kontejneru slideru */
            display: flex;
            align-items: center;
        }
        .power-off-slider-knob {
            position: absolute;
            left: 5px; /* Počáteční pozice */
            top: 50%;
            transform: translateY(-50%);
            width: 50px; /* Velikost kolečka */
            height: 50px;
            background-color: #ff3b30; /* Červená barva */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 8px rgba(0,0,0,0.4);
            cursor: grab;
            z-index: 2; /* Nad textem */
        }
        .power-off-slider-knob svg {
            width: 28px;
            height: 28px;
            fill: white;
        }
        .power-off-slider-text {
            color: rgba(255,255,255,0.7);
            font-size: 1rem;
            pointer-events: none; 
            width: 100%; /* Aby text byl za kolečkem */
            text-align: center;
            z-index: 1; /* Pod kolečkem */
        }

        .power-off-cancel-btn {
            background: rgba(255,255,255,0.15);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .power-off-cancel-btn:hover {
            background: rgba(255,255,255,0.25);
        }
        .power-off-cancel-btn svg {
            width: 28px;
            height: 28px;
            fill: white;
        }

        /* Fullscreen Shutdown Fade Overlay */
        #shutdown-fade-overlay {
            position: fixed; 
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0,0,0,0.7); 
            z-index: 9999; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #shutdown-fade-overlay.visible {
            opacity: 1;
            visibility: visible;
        }
        .shutdown-message { 
            color: white;
            font-size: 1.2rem;
            padding: 20px;
            background-color: rgba(50,50,50,0.8);
            border-radius: 10px;
            text-align: center;
        }
    </style>
</head>
<body>

    <div id="iphone-device">
        <div id="volume-up-button" class="iphone-side-button volume-button-up" aria-label="Zvýšit hlasitost"></div>
        <div id="volume-down-button" class="iphone-side-button volume-button-down" aria-label="Snížit hlasitost"></div>
        <div id="power-button" class="iphone-side-button side-button-power" aria-label="Zamknout/Odemknout"></div>

        <div id="simulated-screen">
            <div class="dynamic-island"></div> 

            <div id="volume-indicator-overlay">
                <div id="volume-level-bar-container">
                    <div id="volume-level-bar"></div>
                </div>
            </div>

            <div id="control-center-overlay">
                <div id="control-center-panel">
                    <div class="control-center-header">
                        <button id="control-center-power-off-btn" class="control-center-power-btn" aria-label="Vypnout">
                            <svg viewBox="0 0 20 20"><path d="M9.99 2.5a.75.75 0 00-1.06 0L6.22 5.22a.75.75 0 001.06 1.06L9.25 4.31V10a.75.75 0 001.5 0V4.31l1.97 1.97a.75.75 0 001.06-1.06l-2.72-2.72zM5 10a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5H5.75A.75.75 0 015 10zM3.938 7.5H3.5a1.5 1.5 0 00-1.5 1.5v6A1.5 1.5 0 003.5 16.5h13a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-.438c.22-.612.31-1.254.266-1.898A6.501 6.501 0 0010 0a6.5 6.5 0 00-6.328 5.602c-.044.644.047 1.286.266 1.898zM10 1.5a5 5 0 014.832 4.09A5.003 5.003 0 0110 10.5a5.003 5.003 0 01-4.832-4.91A5 5 0 0110 1.5z"></path></svg>
                        </button>
                    </div>
                    <p style="color: #555; text-align: center; margin-top: 20px;">Ovládací Centrum</p>
                </div>
            </div>

            <div id="power-off-screen" class="screen-view"> 
                <div class="power-off-slider-container" id="power-off-slider-container">
                    <div class="power-off-slider-knob" id="power-off-slider-knob">
                        <svg viewBox="0 0 20 20" fill="currentColor" style="width: 24px; height: 24px;"> 
                            <path fill-rule="evenodd" d="M9.99 2.5a.75.75 0 00-1.06 0L6.22 5.22a.75.75 0 001.06 1.06L9.25 4.31V10a.75.75 0 001.5 0V4.31l1.97 1.97a.75.75 0 001.06-1.06l-2.72-2.72zM5 10a.75.75 0 01.75-.75h8.5a.75.75 0 010 1.5H5.75A.75.75 0 015 10zM3.938 7.5H3.5a1.5 1.5 0 00-1.5 1.5v6A1.5 1.5 0 003.5 16.5h13a1.5 1.5 0 001.5-1.5v-6a1.5 1.5 0 00-1.5-1.5h-.438c.22-.612.31-1.254.266-1.898A6.501 6.501 0 0010 0a6.5 6.5 0 00-6.328 5.602c-.044.644.047 1.286.266 1.898zM10 1.5a5 5 0 014.832 4.09A5.003 5.003 0 0110 10.5a5.003 5.003 0 01-4.832-4.91A5 5 0 0110 1.5z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <span class="power-off-slider-text">Vypněte přejetím</span>
                </div>
                </div>


            <div id="lock-screen" class="screen-view active">
                <div class="status-bar">
                    <span class="operator-name">T-Mobile CZ</span>
                    <div class="icons">
                        <svg viewBox="0 0 48 38" class="ios-signal-icon"><rect x="2" y="26" width="7" height="9" rx="1.5"></rect><rect x="11" y="19" width="7" height="16" rx="1.5"></rect><rect x="20" y="12" width="7" height="23" rx="1.5"></rect><rect x="29" y="5" width="7" height="30" rx="1.5"></rect></svg>
                        <svg viewBox="0 0 26 16" class="ios-5g-icon"><text x="0" y="12.5" font-size="13">5G</text></svg>
                        <svg viewBox="0 0 30 18" class="ios-battery-icon"><rect x="1" y="2.5" width="22" height="11" rx="2" ry="2" stroke-width="1.5" fill="none" stroke="#333333"/><rect x="2.5" y="4" width="15.5" height="8" fill="#333333" rx="1" ry="1"/><rect x="24" y="5.5" width="2" height="5" rx="0.5" ry="0.5" fill="#333333"/></svg>
                    </div>
                </div>
                <div class="lock-screen-content-wrapper">
                    <div class="lock-screen-top-info">
                        <div id="lock-screen-date" class="current-date"></div>
                        <div id="lock-screen-time-large" class="current-time-large"></div>
                    </div>
                    <div class="lock-screen-bottom-controls">
                        <div class="lock-screen-shortcuts">
                            <button id="flashlight-btn" class="shortcut-button" aria-label="Svítilna">
                                <img src="https://i.ibb.co/R4QvChNg/svitilna.png" alt="svítilna">
                            </button>
                            <button id="camera-btn" class="shortcut-button" aria-label="Fotoaparát">
                                <img src="https://i.ibb.co/dJKGtySg/fotoaparat.png" alt="fotoaparát">
                            </button>
                        </div>
                    </div>
                </div>
                 <div class="home-indicator-area" id="home-indicator-interaction-area"> 
                    <div class="home-indicator-bar"></div>
                </div>
            </div>

            <div id="passcode-screen" class="screen-view">
                <div class="status-bar">
                    <span class="operator-name">T-Mobile CZ</span>
                     <div class="icons">
                        <svg viewBox="0 0 48 38" class="ios-signal-icon"><rect x="2" y="26" width="7" height="9" rx="1.5"></rect><rect x="11" y="19" width="7" height="16" rx="1.5"></rect><rect x="20" y="12" width="7" height="23" rx="1.5"></rect><rect x="29" y="5" width="7" height="30" rx="1.5"></rect></svg>
                        <svg viewBox="0 0 26 16" class="ios-5g-icon"><text x="0" y="12.5" font-size="13">5G</text></svg>
                        <svg viewBox="0 0 30 18" class="ios-battery-icon"><rect x="1" y="2.5" width="22" height="11" rx="2" ry="2" stroke-width="1.5" fill="none" stroke="#333333"/><rect x="2.5" y="4" width="15.5" height="8" fill="#333333" rx="1" ry="1"/><rect x="24" y="5.5" width="2" height="5" rx="0.5" ry="0.5" fill="#333333"/></svg>
                    </div>
                </div>
                <div class="passcode-screen-wrapper">
                    <div class="passcode-prompt">Zadejte kód</div>
                    <div class="passcode-circles">
                        <div class="circle"></div><div class="circle"></div><div class="circle"></div>
                        <div class="circle"></div><div class="circle"></div><div class="circle"></div>
                    </div>
                    <div class="keypad">
                        <button class="keypad-button" data-value="1"><span class="digit">1</span><span class="letters">&nbsp;</span></button>
                        <button class="keypad-button" data-value="2"><span class="digit">2</span><span class="letters">ABC</span></button>
                        <button class="keypad-button" data-value="3"><span class="digit">3</span><span class="letters">DEF</span></button>
                        <button class="keypad-button" data-value="4"><span class="digit">4</span><span class="letters">GHI</span></button>
                        <button class="keypad-button" data-value="5"><span class="digit">5</span><span class="letters">JKL</span></button>
                        <button class="keypad-button" data-value="6"><span class="digit">6</span><span class="letters">MNO</span></button>
                        <button class="keypad-button" data-value="7"><span class="digit">7</span><span class="letters">PQRS</span></button>
                        <button class="keypad-button" data-value="8"><span class="digit">8</span><span class="letters">TUV</span></button>
                        <button class="keypad-button" data-value="9"><span class="digit">9</span><span class="letters">WXYZ</span></button>
                        <div class="keypad-button utility" style="visibility: hidden;"></div>
                        <button class="keypad-button" data-value="0"><span class="digit">0</span><span class="letters">&nbsp;</span></button>
                        <div class="keypad-button utility" style="visibility: hidden;"></div>
                    </div>
                    <div class="passcode-actions">
                        <button id="emergency-btn" class="action-link">Krizová situace</button>
                        <button id="cancel-passcode-btn" class="action-link">Zrušit</button>
                    </div>
                </div>
                <div class="home-indicator-area" id="passcode-home-indicator"> 
                    <div class="home-indicator-bar"></div>
                </div>
            </div>

            <div id="home-screen" class="screen-view">
                 <div class="status-bar">
                    <span class="status-bar-time" id="home-screen-status-time"></span> 
                     <div class="icons">
                        <svg viewBox="0 0 48 38" class="ios-signal-icon"><rect x="2" y="26" width="7" height="9" rx="1.5"></rect><rect x="11" y="19" width="7" height="16" rx="1.5"></rect><rect x="20" y="12" width="7" height="23" rx="1.5"></rect><rect x="29" y="5" width="7" height="30" rx="1.5"></rect></svg>
                        <svg viewBox="0 0 26 16" class="ios-5g-icon"><text x="0" y="12.5" font-size="13">5G</text></svg>
                        <svg viewBox="0 0 30 18" class="ios-battery-icon"><rect x="1" y="2.5" width="22" height="11" rx="2" ry="2" stroke-width="1.5" fill="none" stroke="#333333"/><rect x="2.5" y="4" width="15.5" height="8" fill="#333333" rx="1" ry="1"/><rect x="24" y="5.5" width="2" height="5" rx="0.5" ry="0.5" fill="#333333"/></svg>
                    </div>
                </div>
                <div class="home-screen-content">
                    <div class="app-grid" id="main-app-grid">
                        </div>
                    <div class="dock" id="dock-app-grid">
                        </div>
                </div>
                <div class="home-indicator-area" id="home-screen-home-indicator"> 
                    <div class="home-indicator-bar"></div>
                </div>
            </div>
            
        </div> </div> 
        <script>
        const lockScreen = document.getElementById('lock-screen');
        const passcodeScreen = document.getElementById('passcode-screen');
        const homeScreen = document.getElementById('home-screen');
        const simulatedScreen = document.getElementById('simulated-screen'); 

        const homeIndicatorLock = document.getElementById('home-indicator-interaction-area');
        const homeIndicatorPasscode = document.getElementById('passcode-home-indicator');
        const homeIndicatorHome = document.getElementById('home-screen-home-indicator');

        const powerButton = document.getElementById('power-button');
        const volumeUpButton = document.getElementById('volume-up-button');
        const volumeDownButton = document.getElementById('volume-down-button');

        const volumeIndicatorOverlay = document.getElementById('volume-indicator-overlay');
        const volumeLevelBar = document.getElementById('volume-level-bar');
        
        const cancelPasscodeBtn = document.getElementById('cancel-passcode-btn');
        const emergencyBtn = document.getElementById('emergency-btn');
        const keypadButtons = document.querySelectorAll('.keypad-button[data-value]');
        const passcodeCirclesContainer = document.querySelector('.passcode-circles');
        const passcodeCircles = passcodeCirclesContainer.querySelectorAll('.circle');

        const lockScreenTimeLargeEl = document.getElementById('lock-screen-time-large');
        const lockScreenDateEl = document.getElementById('lock-screen-date');
        const homeScreenStatusTimeEl = document.getElementById('home-screen-status-time'); 

        const flashlightBtn = document.getElementById('flashlight-btn');
        const cameraBtn = document.getElementById('camera-btn');

        const controlCenterOverlay = document.getElementById('control-center-overlay');
        const controlCenterPanel = document.getElementById('control-center-panel');
        const controlCenterPowerOffBtn = document.getElementById('control-center-power-off-btn');
        const powerOffScreen = document.getElementById('power-off-screen');
        const powerOffSliderContainer = document.getElementById('power-off-slider-container'); 
        const powerOffSliderKnob = document.getElementById('power-off-slider-knob'); 
        // const cancelPowerOffBtn = document.getElementById('cancel-power-off-btn'); // Odebráno

        const shutdownFadeOverlay = document.getElementById('shutdown-fade-overlay');


        let currentPasscode = "";
        const CORRECT_PASSCODE = "320010";
        let flashlightActive = false;

        let currentVolume = 50; 
        const volumeStep = 10;
        let volumeIndicatorTimeout;
        let controlCenterVisible = false;

        let isDraggingSlider = false;
        let sliderStartX;
        let knobStartLeft;
        const sliderThresholdPercentage = 0.7; 


        const mainApps = [
            { name: "Hodiny", icon: "https://i.postimg.cc/Z5stGbmj/hodiny.png", id: "clock" },
            { name: "Kalendář", icon: "https://i.postimg.cc/bNLKnyZ8/kalendar.png", id: "calendar" },
            { name: "Poznámky", icon: "https://i.postimg.cc/MKD8Y0rC/poznamky.png", id: "notes" },
            { name: "Kalkulačka", icon: "https://i.postimg.cc/Qdyw6fgy/kalkulacka.png", id: "calculator" },
            { name: "Fotoaparát", icon: "https://i.postimg.cc/HkRv0VdG/fotoaparat.png", id: "camera-app" },
            { name: "Fotky", icon: "https://i.postimg.cc/NFcW6L8G/fotky.png", id: "photos" },
            { name: "Soubory", icon: "https://i.postimg.cc/fRL1jGdd/soubory.png", id: "files" },
            { name: "YouTube", icon: "https://i.postimg.cc/xCr7Qq4G/youtube.png", id: "youtube" },
            { name: "Facebook", icon: "https://i.postimg.cc/Twrs3Gzz/facebook.png", id: "facebook" },
            { name: "Messenger", icon: "https://i.postimg.cc/zfHM4T0X/messenger.png", id: "messenger" },
            { name: "Instagram", icon: "https://i.postimg.cc/T1JBCGQV/instagram.png", id: "instagram" },
            { name: "WhatsApp", icon: "https://i.postimg.cc/x8n4khYc/whatsapp.png", id: "whatsapp" },
            { name: "Safari", icon: "https://i.postimg.cc/2jnY1Nd8/safari.png", id: "safari" },
            { name: "FaceTime", icon: "https://i.postimg.cc/XqLD9L7x/facetime.png", id: "facetime" },
            { name: "Najít", icon: "https://i.postimg.cc/5y5WT89F/najit.png", id: "findmy" },
            { name: "Mapy", icon: "https://i.postimg.cc/28mDv9Td/mapy.png", id: "maps" },
            { name: "Hesla", icon: "https://i.postimg.cc/66Vs9Lw8/hesla.png", id: "passwords" },
            { name: "AppStore", icon: "https://i.postimg.cc/c4dp6g4X/appstore.png", id: "appstore" },
            { name: "Nastavení", icon: "https://i.postimg.cc/Twmz5nDH/nastaveni.png", id: "settings" }
        ];

        const dockApps = [
            { name: "", icon: "https://i.postimg.cc/mZyqxLNM/kontakty.png", id: "contacts" },
            { name: "", icon: "https://i.postimg.cc/zXdcBxQG/telefon.png", id: "phone" },
            { name: "", icon: "https://i.postimg.cc/13fYNpxc/zpravy.png", id: "messages" },
            { name: "", icon: "https://i.postimg.cc/Bnnf78rX/mail.png", id: "mail" }
        ];

        function createAppScreen(app) {
            const appScreenId = `app-${app.id}-screen`;
            if (document.getElementById(appScreenId)) {
                return appScreenId;
            }

            const appScreenDiv = document.createElement('div');
            appScreenDiv.id = appScreenId;
            appScreenDiv.classList.add('screen-view', 'app-screen'); 
            appScreenDiv.style.backgroundColor = '#f8f8f8'; 

            const statusBarHtml = `
                <div class="status-bar" data-app-screen-id="${appScreenId}"> <span class="status-bar-time" id="app-${app.id}-status-time"></span>
                    <div class="icons">
                        <svg viewBox="0 0 48 38" class="ios-signal-icon"><rect x="2" y="26" width="7" height="9" rx="1.5"></rect><rect x="11" y="19" width="7" height="16" rx="1.5"></rect><rect x="20" y="12" width="7" height="23" rx="1.5"></rect><rect x="29" y="5" width="7" height="30" rx="1.5"></rect></svg>
                        <svg viewBox="0 0 26 16" class="ios-5g-icon"><text x="0" y="12.5" font-size="13">5G</text></svg>
                        <svg viewBox="0 0 30 18" class="ios-battery-icon"><rect x="1" y="2.5" width="22" height="11" rx="2" ry="2" stroke-width="1.5" fill="none" stroke="#333333"/><rect x="2.5" y="4" width="15.5" height="8" fill="#333333" rx="1" ry="1"/><rect x="24" y="5.5" width="2" height="5" rx="0.5" ry="0.5" fill="#333333"/></svg>
                    </div>
                </div>`;
            
            const contentHtml = `
                <div class="app-screen-content">
                    <h2>${app.name}</h2>
                    <p>Toto je obrazovka aplikace ${app.name}.</p>
                </div>`;

            const homeIndicatorHtml = `
                <div class="home-indicator-area app-home-indicator" data-app-id="${app.id}">
                    <div class="home-indicator-bar"></div>
                </div>`;
            
            appScreenDiv.innerHTML = statusBarHtml + contentHtml + homeIndicatorHtml;
            simulatedScreen.appendChild(appScreenDiv);

            const appStatusBar = appScreenDiv.querySelector('.status-bar');
            if (appStatusBar) {
                appStatusBar.addEventListener('click', toggleControlCenter);
            }
            return appScreenId;
        }


        function populateAppGrid(apps, gridElementId) {
            const grid = document.getElementById(gridElementId);
            if (!grid) return;

            apps.forEach(app => {
                const appScreenId = createAppScreen(app); 

                const iconDiv = document.createElement('div');
                iconDiv.classList.add('app-icon');
                iconDiv.setAttribute('data-app', appScreenId); 
                
                const img = document.createElement('img');
                img.src = app.icon;
                img.alt = `Ikona ${app.name}`;
                img.onerror = function() { this.src='https://placehold.co/60x60/e0e0e0/757575?text=App'; this.alt='Placeholder ikona aplikace';};


                const span = document.createElement('span');
                span.textContent = app.name;

                iconDiv.appendChild(img);
                iconDiv.appendChild(span);
                grid.appendChild(iconDiv);

                iconDiv.addEventListener('click', () => {
                    const targetScreenId = iconDiv.getAttribute('data-app');
                    const targetScreen = document.getElementById(targetScreenId);
                    if (targetScreen) {
                        showScreen(targetScreen);
                    }
                });
            });
        }
        
        function addHomeIndicatorListenersForAppScreens() {
            const appHomeIndicators = document.querySelectorAll('.app-home-indicator');
            appHomeIndicators.forEach(indicator => {
                const newIndicator = indicator.cloneNode(true);
                indicator.parentNode.replaceChild(newIndicator, indicator);
                newIndicator.addEventListener('click', () => {
                    showScreen(homeScreen);
                });
            });
        }


        function updateDateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const timeString = `${hours}:${minutes}`; 
            const optionsDate = { weekday: 'long', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('cs-CZ', optionsDate);

            if (lockScreenTimeLargeEl) {
                lockScreenTimeLargeEl.textContent = timeString; 
            }
            if (lockScreenDateEl) {
                lockScreenDateEl.textContent = dateString.charAt(0).toUpperCase() + dateString.slice(1);
            }

            if (homeScreenStatusTimeEl && homeScreen.classList.contains('active')) {
                homeScreenStatusTimeEl.textContent = timeString;
            }

            const activeAppScreen = document.querySelector('.app-screen.active');
            if (activeAppScreen) {
                const appTimeEl = activeAppScreen.querySelector('.status-bar-time');
                if (appTimeEl) {
                    appTimeEl.textContent = timeString;
                }
            }
        }

        function showScreen(screenElement) {
            document.querySelectorAll('.screen-view').forEach(s => {
                s.classList.remove('active');
                if (s.id !== 'power-off-screen') { 
                    s.style.display = 'none';
                }
            });
            if (screenElement) { 
                 screenElement.classList.add('active');
                 if (screenElement.id !== 'power-off-screen') {
                    screenElement.style.display = 'flex';
                 }
            }
            if (screenElement && screenElement.id === 'power-off-screen') {
                powerOffScreen.style.display = 'flex';
            } else if (powerOffScreen && powerOffScreen.style.display === 'flex' && screenElement !== powerOffScreen) {
                powerOffScreen.style.display = 'none';
            }

            updateDateTime(); 
        }

        function resetPasscodeEntry() {
            currentPasscode = "";
            passcodeCircles.forEach(circle => circle.classList.remove('filled'));
        }

        function updatePasscodeCircles() {
            passcodeCircles.forEach((circle, index) => {
                circle.classList.toggle('filled', index < currentPasscode.length);
            });
        }

        function handlePasscodeDigit(digit) {
            if (currentPasscode.length < 6) {
                currentPasscode += digit;
                updatePasscodeCircles();
                if (currentPasscode.length === 6) {
                    checkPasscode();
                }
            }
        }

        function checkPasscode() {
            if (currentPasscode === CORRECT_PASSCODE) {
                setTimeout(() => {
                    showScreen(homeScreen);
                    resetPasscodeEntry();
                }, 200);
            } else {
                passcodeCirclesContainer.classList.add('shake');
                passcodeCircles.forEach(c => c.style.borderColor = '#cc0000');

                setTimeout(() => {
                    passcodeCirclesContainer.classList.remove('shake');
                    resetPasscodeEntry();
                    passcodeCircles.forEach(c => c.style.borderColor = 'rgba(51, 51, 51, 0.6)');
                }, 600);
            }
        }

        function updateVolumeIndicatorDisplay() {
            if (volumeLevelBar) {
                volumeLevelBar.style.height = `${currentVolume}%`;
            }
        }

        function showVolumeIndicator() {
            if (volumeIndicatorOverlay) {
                volumeIndicatorOverlay.classList.remove('hidden-animation'); 
                volumeIndicatorOverlay.classList.add('visible');
                updateVolumeIndicatorDisplay();

                clearTimeout(volumeIndicatorTimeout); 
                volumeIndicatorTimeout = setTimeout(() => {
                    volumeIndicatorOverlay.classList.add('hidden-animation'); 
                    setTimeout(() => { 
                         volumeIndicatorOverlay.classList.remove('visible');
                    }, 300); 
                }, 2000); 
            }
        }
        
        function toggleControlCenter() {
            const currentActiveScreen = document.querySelector('.screen-view.active');
            if (currentActiveScreen && (currentActiveScreen.id === 'home-screen' || currentActiveScreen.classList.contains('app-screen'))) {
                controlCenterVisible = !controlCenterVisible;
                if (controlCenterOverlay) {
                    controlCenterOverlay.classList.toggle('visible', controlCenterVisible);
                }
            }
        }
        
        function handleSliderDragStart(e) {
            isDraggingSlider = true;
            if (powerOffSliderKnob) powerOffSliderKnob.style.cursor = 'grabbing';
            sliderStartX = e.clientX || (e.touches && e.touches[0].clientX);
            if (powerOffSliderKnob) knobStartLeft = powerOffSliderKnob.offsetLeft;
            
            document.addEventListener('mousemove', handleSliderDragMove);
            document.addEventListener('touchmove', handleSliderDragMove, { passive: false }); 
            document.addEventListener('mouseup', handleSliderDragEnd);
            document.addEventListener('touchend', handleSliderDragEnd);
            if (e.touches && e.preventDefault) e.preventDefault(); 
        }

        function handleSliderDragMove(e) {
            if (!isDraggingSlider) return;
            if (e.preventDefault) e.preventDefault(); 

            const currentX = e.clientX || (e.touches && e.touches[0].clientX);
            const deltaX = currentX - sliderStartX;
            let newLeft = knobStartLeft + deltaX;

            const containerRect = powerOffSliderContainer.getBoundingClientRect();
            const knobRect = powerOffSliderKnob.getBoundingClientRect();
            
            const minLeft = 0; 
            const maxLeft = containerRect.width - knobRect.width - (2 * 5); 

            newLeft = Math.max(minLeft, Math.min(newLeft, maxLeft));
            if (powerOffSliderKnob) powerOffSliderKnob.style.left = `${newLeft}px`;
        }

        function handleSliderDragEnd() {
            if (!isDraggingSlider) return;
            isDraggingSlider = false;
            if (powerOffSliderKnob) powerOffSliderKnob.style.cursor = 'grab';
            document.removeEventListener('mousemove', handleSliderDragMove);
            document.removeEventListener('touchmove', handleSliderDragMove);
            document.removeEventListener('mouseup', handleSliderDragEnd);
            document.removeEventListener('touchend', handleSliderDragEnd);

            const containerRect = powerOffSliderContainer.getBoundingClientRect();
            const knobRect = powerOffSliderKnob.getBoundingClientRect();
            const currentKnobPosition = powerOffSliderKnob.offsetLeft;
            const activationThreshold = (containerRect.width - knobRect.width - 10) * sliderThresholdPercentage;


            if (currentKnobPosition >= activationThreshold) {
                console.log("Power off slider activated - initiating shutdown sequence");
                
                const messageBox = document.createElement('div');
                messageBox.className = 'shutdown-message';
                messageBox.textContent = "Čekejte, prosím. Simulátor se vypíná.";
                
                if (shutdownFadeOverlay) {
                    shutdownFadeOverlay.innerHTML = ''; 
                    shutdownFadeOverlay.appendChild(messageBox);
                    shutdownFadeOverlay.classList.add('visible');
                }
                
                setTimeout(() => {
                    // Zde by se normálně jen čekalo, zpráva je již v overlayi
                    setTimeout(() => {
                        console.log("Redirecting to index.html");
                        window.location.href = 'index.html'; 
                    }, 5000); // Čekání 2s s černým overlayem
                }, 100); // Krátká prodleva pro zobrazení zprávy

            } else {
                if (powerOffSliderKnob) {
                    powerOffSliderKnob.style.transition = 'left 0.3s ease-out';
                    powerOffSliderKnob.style.left = '5px'; 
                    setTimeout(() => {
                        if (powerOffSliderKnob) powerOffSliderKnob.style.transition = ''; 
                    }, 3000);
                }
            }
        }
        
        if (powerOffSliderKnob) {
            powerOffSliderKnob.addEventListener('mousedown', handleSliderDragStart);
            powerOffSliderKnob.addEventListener('touchstart', handleSliderDragStart, { passive: false });
        }

        if (powerButton) {
            powerButton.addEventListener('click', () => {
                console.log("Power button clicked");
                showScreen(lockScreen);
                resetPasscodeEntry(); 
            });
        }

        if (volumeUpButton) {
            volumeUpButton.addEventListener('click', () => {
                currentVolume = Math.min(100, currentVolume + volumeStep);
                console.log("Volume Up: " + currentVolume);
                showVolumeIndicator();
            });
        }

        if (volumeDownButton) {
            volumeDownButton.addEventListener('click', () => {
                currentVolume = Math.max(0, currentVolume - volumeStep);
                console.log("Volume Down: " + currentVolume);
                showVolumeIndicator();
            });
        }

        if (homeIndicatorLock) {
            homeIndicatorLock.addEventListener('click', () => {
                showScreen(passcodeScreen);
                resetPasscodeEntry();
            });
        }
        if (homeIndicatorPasscode) {
             homeIndicatorPasscode.addEventListener('click', () => {
                 showScreen(lockScreen); 
                 resetPasscodeEntry();
             });
        }
        if (homeIndicatorHome) {
            homeIndicatorHome.addEventListener('click', () => {
                 showScreen(homeScreen);
            });
        }

        document.querySelectorAll('.status-bar').forEach(sb => {
            sb.addEventListener('click', (event) => {
                const clickedOnIcon = event.target.closest('.icons');
                const currentActiveScreen = document.querySelector('.screen-view.active');
                if (currentActiveScreen && (currentActiveScreen.id === 'home-screen' || currentActiveScreen.classList.contains('app-screen')) &&
                    (!powerOffScreen || powerOffScreen.style.display !== 'flex') && 
                    !clickedOnIcon) {
                    toggleControlCenter();
                }
            });
        });

        if(controlCenterOverlay) {
            controlCenterOverlay.addEventListener('click', (event) => {
                if (event.target === controlCenterOverlay) {
                    toggleControlCenter();
                }
            });
        }


        if (controlCenterPowerOffBtn) {
            controlCenterPowerOffBtn.addEventListener('click', () => {
                if (controlCenterOverlay) controlCenterOverlay.classList.remove('visible');
                controlCenterVisible = false;
                if (powerOffScreen) {
                    powerOffScreen.style.display = 'flex'; 
                    powerOffScreen.classList.add('active'); 
                    if(powerOffSliderKnob) powerOffSliderKnob.style.left = '5px';
                }
            });
        }

        // Odebrán listener pro cancelPowerOffBtn, protože tlačítko bylo odstraněno

        if (cancelPasscodeBtn) {
            cancelPasscodeBtn.addEventListener('click', () => {
                showScreen(lockScreen);
                resetPasscodeEntry();
            });
        }

        if (emergencyBtn) {
            emergencyBtn.addEventListener('click', () => {
                console.log("Krizová situace aktivována");
                const existingMessageBox = document.getElementById('custom-message-box');
                if (existingMessageBox) existingMessageBox.remove();

                const messageBox = document.createElement('div');
                messageBox.id = 'custom-message-box';
                messageBox.style.cssText = 'position: fixed; left: 50%; top: 30%; transform: translate(-50%, -50%); background-color: rgba(50,50,50,0.9); color: white; padding: 25px; border-radius: 12px; z-index: 1001; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.3); font-size: 1rem;';
                messageBox.innerHTML = 'Funkce Krizová situace není v tomto simulátoru plně implementována.<br><button id="close-alert-btn" style="padding: 8px 15px; margin-top: 15px; background-color: #007aff; border: none; border-radius: 8px; color: white; cursor: pointer; font-size: 0.9rem;">OK</button>';
                document.body.appendChild(messageBox);
                document.getElementById('close-alert-btn').onclick = () => messageBox.remove();
            });
        }

        keypadButtons.forEach(button => {
            button.addEventListener('click', () => {
                const value = button.dataset.value;
                if (value) handlePasscodeDigit(value);
            });
        });

        if (flashlightBtn) {
            flashlightBtn.addEventListener('click', () => {
                flashlightActive = !flashlightActive;
                flashlightBtn.classList.toggle('active', flashlightActive);
                console.log(flashlightActive ? "Svítilna zapnuta" : "Svítilna vypnuta");
            });
        }

        if (cameraBtn) {
            cameraBtn.addEventListener('click', () => {
                console.log("Fotoaparát aktivován (simulace)");
                const existingMessageBox = document.getElementById('custom-message-box');
                if (existingMessageBox) existingMessageBox.remove();
                const messageBox = document.createElement('div');
                messageBox.id = 'custom-message-box';
                messageBox.style.cssText = 'position: fixed; left: 50%; top: 30%; transform: translate(-50%, -50%); background-color: rgba(50,50,50,0.9); color: white; padding: 25px; border-radius: 12px; z-index: 1001; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.3); font-size: 1rem;';
                messageBox.innerHTML = 'Fotoaparát není v tomto simulátoru implementován.<br>Otevírám obrazovku pro zadání kódu.<br><button id="close-alert-btn" style="padding: 8px 15px; margin-top: 15px; background-color: #007aff; border: none; border-radius: 8px; color: white; cursor: pointer; font-size: 0.9rem;">OK</button>';
                document.body.appendChild(messageBox);
                document.getElementById('close-alert-btn').onclick = () => {
                    messageBox.remove();
                    showScreen(passcodeScreen);
                    resetPasscodeEntry();
                };
            });
        }

        // Inicializace
        populateAppGrid(mainApps, 'main-app-grid');
        populateAppGrid(dockApps, 'dock-app-grid');
        addHomeIndicatorListenersForAppScreens(); 

        showScreen(lockScreen); 
        setInterval(updateDateTime, 1000); 

    </script>
</body>
</html>
